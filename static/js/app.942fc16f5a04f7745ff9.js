webpackJsonp([1],[,,,,,function(t,e,n){"use strict";var i=n(50),s=n.n(i),o={apiKey:"AIzaSyA40E-WuhXZZ77_ZeDZ2SJ5Tcug3W5CXWI",authDomain:"angular2curso.firebaseapp.com",databaseURL:"https://angular2curso.firebaseio.com",projectId:"angular2curso",storageBucket:"angular2curso.appspot.com",messagingSenderId:"894835197849"},a=s.a.initializeApp(o);a.auth().onAuthStateChanged(function(t){t?t.getIdToken(!0).then(function(t){t&&(console.log("LOGGED IN"),localStorage.setItem("TOKEN",t))}):console.log("LOGGED OUT")}),e.a=a},,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(6),s=n(84),o=n(77),a=n.n(o),r=n(79),c=n.n(r),u=n(78),l=n.n(u);i.a.use(s.a),e.a=new s.a({mode:"history",routes:[{path:"/:product/edit",name:"Edit",component:a.a,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:l.a},{path:"/",name:"Products",component:c.a,meta:{requiresAuth:!0}}]})},,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(6),s=n(20),o=n(41),a=n(40),r=n(42);i.a.use(s.a),e.a=new s.a.Store({state:r.a,mutations:o.a,actions:a.a})},function(t,e,n){var i=n(10)(null,n(82),null,null,null);t.exports=i.exports},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),s=n(38),o=n(86),a=n.n(o);i.a.use(a.a),e.default={name:"edit",data:function(){return{product:this.$route.params.product,token:localStorage.getItem("TOKEN"),content:{title:"",firmness:"",body:""},size:{size:"",price:""}}},firebase:function(){return{DB_SIZES:s.a.ref(this.product+"/sizes"),DB_CONTENT:s.a.ref(this.product+"/content")}},computed:{store_sizes:function(){return this.$store.state.sizes}},mounted:function(){var t=this;this.$http.get(this.product+"/content.json?auth="+this.token).then(function(t){return t.json()}).then(function(e){t.content.title=e.title,t.content.firmness=e.firmness,t.content.body=e.body})},methods:{updateStore:function(){this.$store.dispatch("add_new_size")},onSubmitContent:function(){this.$firebaseRefs.DB_CONTENT.set(this.content)},onAddSize:function(){this.$firebaseRefs.DB_SIZES.push(this.size)},onDelete:function(t){this.$firebaseRefs.DB_SIZES.child(t[".key"]).remove()},updateSize:function(t,e){this.$firebaseRefs.DB_SIZES.child(t[".key"]).child("size").set(e)},updateSizePrice:function(t,e){this.$firebaseRefs.DB_SIZES.child(t[".key"]).child("price").set(e)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);i.a.auth();e.default={name:"login",data:function(){return{creds:{email:"",password:""}}},computed:{isLoggedIn:function(){return this.$store.state.isLoggedIn},isValid:function(){return this.$store.state.isValid}},mounted:function(){this.isLoggedIn&&this.$router.push("/")},methods:{onLogin:function(){this.$store.dispatch("login",this.creds)},onSignup:function(){this.$store.dispatch("sigup",this.creds)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"products",methods:{onSignout:function(){this.$store.dispatch("logout")}}}},function(t,e,n){"use strict";var i=n(5),s=i.a.database();e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),s=n(20),o=n(33),a=n.n(o),r=n(34),c=n(32),u=n(19),l=n(5),d=l.a.auth();i.a.use(r.a),i.a.use(s.a),i.a.config.productionTip=!1,i.a.http.options.root="https://angular2curso.firebaseio.com/",u.a.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?d.currentUser?n():n({name:"Login"}):n()});var p=d.onAuthStateChanged(function(){new i.a({el:"#app",router:u.a,store:c.a,beforeMount:function(){},template:"<App/>",components:{App:a.a}}),p()})},function(t,e,n){"use strict";var i=n(19),s=n(5),o=s.a.auth(),a={sigup:function(t,e){t.commit;o.createUserWithEmailAndPassword(e.email,e.password).then(function(t){t.sendEmailVerification().then(function(){console.log("email sent")},function(t){console.log(t)})}).catch(function(t){console.log(t.message)})},login:function(t,e){var n=t.commit;o.signInWithEmailAndPassword(e.email,e.password).then(function(t){!1!==t.emailVerified?(i.a.push("/"),n("LOGIN")):console.log("USER NOT VERIFIED: CHECK EMAIL")}).catch(function(t){console.log(t),n("VALIDATION")})},logout:function(t){var e=t.commit;o.signOut(),localStorage.removeItem("TOKEN"),window.location.href="/login",e("LOGOUT")}};e.a=a},function(t,e,n){"use strict";var i={LOGIN:function(t){t.isLoggedIn=!0},LOGOUT:function(t){t.isLoggedIn=!1},VALIDATION:function(t){t.isValid=!1},ADD_NEW_SIZE:function(t,e){t.sizes=e}};e.a=i},function(t,e,n){"use strict";var i={sizes:[],isLoggedIn:!!localStorage.getItem("TOKEN"),isValid:!0};e.a=i},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){function i(t){n(45)}var s=n(10)(n(35),n(83),i,null,null);t.exports=s.exports},function(t,e,n){function i(t){n(43)}var s=n(10)(n(36),n(80),i,null,null);t.exports=s.exports},function(t,e,n){function i(t){n(44)}var s=n(10)(n(37),n(81),i,"data-v-1cb2e6b1",null);t.exports=s.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login"},[n("h1",[t._v("LOGIN")]),t._v(" "),n("form",{on:{submit:function(t){t.preventDefault()}}},[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.email,expression:"creds.email"}],class:{invalid:!t.isValid},attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.creds.email},on:{input:function(e){e.target.composing||(t.creds.email=e.target.value)}}})]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.creds.password,expression:"creds.password"}],class:{invalid:!t.isValid},attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.creds.password},on:{input:function(e){e.target.composing||(t.creds.password=e.target.value)}}})]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.onLogin}},[t._v("Log in")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.onSignup}},[t._v("Sign up")])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"products"},[n("div",{staticClass:"header"},[n("h1",[t._v("CMS")]),t._v(" "),n("button",{staticClass:"btn btn-danger",on:{click:t.onSignout}},[t._v("Sign out")])]),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:"/as1/edit"}},[n("h3",[t._v("AS1")])]),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:"/as2/edit"}},[n("h3",[t._v("AS2")])]),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:"/as3/edit"}},[n("h3",[t._v("AS3")])]),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:"/as4/edit"}},[n("h3",[t._v("AS4")])]),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:"/as5/edit"}},[n("h3",[t._v("AS5")])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"edit"},[n("h1",[t._v("Editing "+t._s(t.$route.params.product))]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-sm-8 "},[n("h4",[t._v("CONTENT")]),t._v(" "),n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content.title,expression:"content.title"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:t.content.title},on:{input:function(e){e.target.composing||(t.content.title=e.target.value)}}})]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content.firmness,expression:"content.firmness"}],attrs:{type:"text",placeholder:"Firmness"},domProps:{value:t.content.firmness},on:{input:function(e){e.target.composing||(t.content.firmness=e.target.value)}}})]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content.body,expression:"content.body"}],attrs:{placeholder:"Content",rows:"7",cols:"80"},domProps:{value:t.content.body},on:{input:function(e){e.target.composing||(t.content.body=e.target.value)}}})]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("button",{staticClass:"btn btn-primary",on:{click:t.onSubmitContent}},[t._v("SAVE")])])])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-sm-8 "},[n("hr"),t._v(" "),n("h4",[t._v("SIZES")]),t._v(" "),n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.size.size,expression:"size.size"}],attrs:{type:"text",placeholder:"Size"},domProps:{value:t.size.size},on:{input:function(e){e.target.composing||(t.size.size=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.size.price,expression:"size.price"}],attrs:{type:"number",placeholder:"Price"},domProps:{value:t.size.price},on:{input:function(e){e.target.composing||(t.size.price=e.target.value)},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.onAddSize}},[t._v("ADD SIZE")])])]),t._v(" "),n("ul",{staticClass:"list-group"},t._l(t.DB_SIZES,function(e,i){return n("li",{staticClass:"list-group-item"},[n("input",{domProps:{value:e.size},on:{input:function(n){t.updateSize(e,n.target.value)}}}),t._v(" "),n("input",{domProps:{value:e.price},on:{input:function(n){t.updateSizePrice(e,n.target.value)}}}),t._v(" "),n("span",{staticClass:"btn btn-danger",on:{click:function(n){t.onDelete(e)}}},[t._v("DELETE")])])}))])])])},staticRenderFns:[]}},,,,function(t,e){}],[39]);
//# sourceMappingURL=app.942fc16f5a04f7745ff9.js.map