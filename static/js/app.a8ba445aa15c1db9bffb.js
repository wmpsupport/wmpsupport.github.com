webpackJsonp([1],[,,,,function(e,t,s){"use strict";var i=s(51),a=s.n(i),n={apiKey:"AIzaSyDVtDRcmQWg4kRhvcgMRHg_GuZunZnY81s",authDomain:"amerisleep-cms.firebaseapp.com",databaseURL:"https://amerisleep-cms.firebaseio.com",projectId:"amerisleep-cms",storageBucket:"amerisleep-cms.appspot.com",messagingSenderId:"1008114877802"},o=a.a.initializeApp(n);o.auth().onAuthStateChanged(function(e){e?e.getIdToken(!0).then(function(e){e&&(console.log("LOGGED IN"),localStorage.setItem("TOKEN",e))}):console.log("LOGGED OUT")}),t.a=o},,,,,,,,,,,,,,,function(e,t,s){"use strict";var i=s(7),a=s(87),n=s(78),o=s.n(n),r=s(81),l=s.n(r),c=s(80),u=s.n(c);i.a.use(a.a),t.a=new a.a({mode:"history",routes:[{path:"/amerisleep-cms/:product/edit",name:"Edit",component:o.a,meta:{requiresAuth:!0}},{path:"/amerisleep-cms/login",name:"Login",component:u.a},{path:"/amerisleep-cms/",name:"Products",component:l.a,meta:{requiresAuth:!0}}]})},,,,,,,,,,,,,function(e,t,s){"use strict";var i=s(7),a=s(20),n=s(43),o=s(42),r=s(44);i.a.use(a.a),t.a=new a.a.Store({state:r.a,mutations:n.a,actions:o.a})},function(e,t,s){var i=s(6)(s(35),s(85),null,null,null);e.exports=i.exports},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(79),a=s.n(i);t.default={name:"app",components:{appHeader:a.a}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),a=s(40),n=s(89),o=s.n(n);i.a.use(o.a),t.default={name:"edit",data:function(){return{saved:!1,product:this.$route.params.product,token:localStorage.getItem("TOKEN"),content:{title:"",firmness:"",body:"",price:"",promo:""},size:{name:"Twin",size:'38" x 74"',price:"0",promo:"0"}}},firebase:function(){return{DB_SIZES:a.a.ref(this.product+"/sizes"),DB_CONTENT:{source:a.a.ref(this.product+"/content"),readyCallback:function(e){this.content.title=e.val().title,this.content.firmness=e.val().firmness,this.content.body=e.val().body,this.content.price=e.val().price,this.content.promo=e.val().promo}}}},computed:{store_sizes:function(){return this.$store.state.sizes}},methods:{updateStore:function(){this.$store.dispatch("add_new_size")},onSubmitContent:function(){this.$firebaseRefs.DB_CONTENT.set(this.content),this.savedFeedback()},onAddSize:function(){this.$firebaseRefs.DB_SIZES.push(this.size),this.size.name="Price",this.size.price='38" x 74"',this.size.promo="",this.size.size="",document.getElementById("sizeName").focus()},onDelete:function(e){confirm("Are you sure you want to DELETE this item?")&&this.$firebaseRefs.DB_SIZES.child(e[".key"]).remove()},updateSizeAttribute:function(e,t,s){this.$firebaseRefs.DB_SIZES.child(e[".key"]).child(s).set(t)},updateName:function(e,t){this.$firebaseRefs.DB_SIZES.child(e[".key"]).child("name").set(t)},updateSize:function(e,t){this.$firebaseRefs.DB_SIZES.child(e[".key"]).child("size").set(t)},updateSizePrice:function(e,t){this.$firebaseRefs.DB_SIZES.child(e[".key"]).child("price").set(t)},savedFeedback:function(){var e=this;this.saved=!0,setTimeout(function(){e.saved=!1},1200)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(4);t.default={name:"app-header",data:function(){return{username:i.a.auth().currentUser.displayName}},methods:{onSignout:function(){this.$store.dispatch("logout")}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(4);i.a.auth();t.default={name:"login",data:function(){return{creds:{email:"",password:""}}},computed:{isLoggedIn:function(){return this.$store.state.isLoggedIn},isValid:function(){return this.$store.state.isValid},isLogging:function(){return this.$store.state.isLogging}},mounted:function(){this.isLoggedIn&&this.$router.push("/amerisleep-cms")},methods:{onLogin:function(){this.$store.dispatch("login",this.creds)},onSignup:function(){this.$store.dispatch("sigup",this.creds)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"products"}},function(e,t,s){"use strict";var i=s(4),a=i.a.database();t.a=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),a=s(20),n=s(33),o=s.n(n),r=s(34),l=s(32),c=s(19),u=s(4),m=u.a.auth();i.a.use(r.a),i.a.use(a.a),i.a.config.productionTip=!1,i.a.http.options.root="https://amerisleep-cms.firebaseapp.com",c.a.beforeEach(function(e,t,s){e.matched.some(function(e){return e.meta.requiresAuth})?m.currentUser?s():s({name:"Login"}):s()});var p=m.onAuthStateChanged(function(){new i.a({el:"#app",router:c.a,store:l.a,beforeMount:function(){},template:"<App/>",components:{App:o.a}}),p()})},function(e,t,s){"use strict";var i=s(19),a=s(4),n=a.a.auth(),o={sigup:function(e,t){e.commit;n.createUserWithEmailAndPassword(t.email,t.password).then(function(e){e.updateProfile({displayName:document.getElementById("username").value}),e.sendEmailVerification().then(function(){console.log("email sent")},function(e){console.log(e)})}).catch(function(e){console.log(e.message)})},login:function(e,t){var s=e.commit;n.signInWithEmailAndPassword(t.email,t.password).then(function(e){!1!==e.emailVerified?(s("LOGGING"),setTimeout(function(){i.a.push("/amerisleep-cms"),s("LOGIN")},1e3)):console.log("USER NOT VERIFIED: CHECK EMAIL")}).catch(function(e){s("VALIDATION")})},logout:function(e){var t=e.commit;n.signOut(),localStorage.removeItem("TOKEN"),window.location.href="/amerisleep-cms/login",t("LOGOUT")}};t.a=o},function(e,t,s){"use strict";var i={LOGGING:function(e){e.isLogging=!0},LOGIN:function(e){e.isLogging=!1,e.isLoggedIn=!0},LOGOUT:function(e){e.isLoggedIn=!1},VALIDATION:function(e){e.isValid=!1},ADD_NEW_SIZE:function(e,t){e.sizes=t}};t.a=i},function(e,t,s){"use strict";var i={sizes:[],isLoggedIn:!!localStorage.getItem("TOKEN"),isLogging:!1,isValid:!0};t.a=i},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){function i(e){s(46)}var a=s(6)(s(36),s(86),i,null,null);e.exports=a.exports},function(e,t,s){var i=s(6)(s(37),s(84),null,null,null);e.exports=i.exports},function(e,t,s){function i(e){s(45)}var a=s(6)(s(38),s(82),i,null,null);e.exports=a.exports},function(e,t,s){var i=s(6)(s(39),s(83),null,null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"login is-flexy is-middle is-center is-column"},[s("div",{staticClass:"box is-flexy is-wrap is-column is-center"},[s("img",{staticClass:"logo",attrs:{src:"/static/img/logo.png",alt:"Amerisleep"}}),e._v(" "),s("form",{staticClass:"is-full",on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"form-row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.email,expression:"creds.email"}],staticClass:"form-controller",class:{invalid:!e.isValid},attrs:{type:"email",placeholder:"Email"},domProps:{value:e.creds.email},on:{input:function(t){t.target.composing||(e.creds.email=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.password,expression:"creds.password"}],staticClass:"form-controller",class:{invalid:!e.isValid},attrs:{type:"password",placeholder:"Password"},domProps:{value:e.creds.password},on:{input:function(t){t.target.composing||(e.creds.password=t.target.value)}}})]),e._v(" "),e._m(0),e._v(" "),s("button",{staticClass:"button is-primary",class:{isLogging:e.isLogging},attrs:{type:"submit"},on:{click:e.onLogin}},[e.isLogging?e._e():s("span",[e._v("Log in")]),e._v(" "),e.isLogging?s("span",[s("img",{attrs:{src:"/static/img/loading.gif",width:"22px"}})]):e._e()])]),e._v(" "),e.isValid?e._e():s("div",{staticClass:"text-alert"},[e._v("\n      Invalid email or password. Please try again or "),s("a",{attrs:{href:"mailto:felipe.nobre@wmpcreative.com?subject=Amerisleep CMS login troubles"}},[e._v("contact")]),e._v(" the administrator!\n    ")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-row info"},[s("span",[e._v("If you can't remember your details please "),s("a",{attrs:{href:"mailto:felipe.nobre@wmpcreative.com?subject=Amerisleep CMS login troubles"}},[e._v("contact")]),e._v(" the administrator of your system.")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"products"},[s("div",{staticClass:"wrapper"},[s("h2",[e._v("The Range USA")]),e._v(" "),s("h3",[e._v("MATTRESSES")]),e._v(" "),s("div",{staticClass:"listing is-flexy is-between"},[s("router-link",{staticClass:"item",attrs:{to:"/amerisleep-cms/as1/edit"}},[s("span",[e._v("AS1")]),s("i",[e._v("edit")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"/amerisleep-cms/as2/edit"}},[s("span",[e._v("AS2")]),s("i",[e._v("edit")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"/amerisleep-cms/as3/edit"}},[s("span",[e._v("AS3")]),s("i",[e._v("edit")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"/amerisleep-cms/as4/edit"}},[s("span",[e._v("AS4")]),s("i",[e._v("edit")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"/amerisleep-cms/as5/edit"}},[s("span",[e._v("AS5")]),s("i",[e._v("edit")])])],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"header"},[s("div",{staticClass:"wrapper is-flexy is-between is-middle"},[s("router-link",{attrs:{to:"/amerisleep-cms"}},[s("img",{staticClass:"logo",attrs:{src:"/static/img/logo.png",alt:"Amerisleep"}})]),e._v(" "),s("div",{staticClass:"user is-flexy is-middle"},[s("div",{staticClass:"is-flexy is-right is-column"},[s("h5",[e._v(e._s(e.username))]),e._v(" "),s("h6",[e._v("Administrator")])]),e._v(" "),s("button",{staticClass:"logout",on:{click:e.onSignout}})])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[e.$store.state.isLoggedIn?s("app-header"):e._e(),e._v(" "),s("transition",{attrs:{mode:"out-in",name:"fade"}},[s("router-view")],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"edit"},[s("div",{staticClass:"wrapper"},[s("header",{staticClass:"is-flexy is-between is-middle is-full"},[s("div",{staticClass:"is-flexy is-middle"},[s("router-link",{staticClass:"back",attrs:{to:"/amerisleep-cms"}},[e._v("Back")]),e._v(" "),s("h2",[e._v("Editing "),s("span",[e._v(e._s(e.$route.params.product))])]),e._v(" "),e.saved?s("span",{staticClass:"saved"},[e._v("Saved")]):e._e()],1),e._v(" "),s("div",{staticClass:"is-flexy"},[s("button",{staticClass:"button is-primary",on:{click:e.onSubmitContent}},[e._v("Save")])])]),e._v(" "),s("div",{staticClass:"forms is-flexy is-between is-full is-top"},[s("div",{staticClass:"content box"},[s("div",{staticClass:"form-row"},[s("label",[e._v("TITLE")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content.title,expression:"content.title"}],staticClass:"form-controller",attrs:{type:"text",placeholder:"Title"},domProps:{value:e.content.title},on:{input:function(t){t.target.composing||(e.content.title=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-row"},[s("label",[e._v("FIRMNESS")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content.firmness,expression:"content.firmness"}],staticClass:"form-controller is-quarter",attrs:{type:"text",placeholder:"Firmness"},domProps:{value:e.content.firmness},on:{input:function(t){t.target.composing||(e.content.firmness=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-row"},[s("label",[e._v("SCREENSAVER PRICE")]),e._v(" "),s("label",[e._v("Price")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content.price,expression:"content.price"}],staticClass:"form-controller is-8of12",attrs:{type:"text",placeholder:"Price"},domProps:{value:e.content.price},on:{input:function(t){t.target.composing||(e.content.price=t.target.value)}}}),e._v(" "),s("label",{staticStyle:{"margin-top":"10px"}},[e._v("Discounted Price")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content.promo,expression:"content.promo"}],staticClass:"form-controller is-8of12",attrs:{type:"text",placeholder:"Price"},domProps:{value:e.content.promo},on:{input:function(t){t.target.composing||(e.content.promo=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-row"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content.body,expression:"content.body"}],staticClass:"form-controller",attrs:{placeholder:"Content",rows:"7",cols:"80"},domProps:{value:e.content.body},on:{input:function(t){t.target.composing||(e.content.body=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"sizes box"},[s("div",{staticClass:"form-row"},[s("label",[e._v("ADD SIZE")]),e._v(" "),s("div",{staticClass:"is-flexy is-between"},[s("div",{staticClass:"is-half is-flexy is-column"},[s("label",{staticClass:"select-label"},[e._v("\n\n                Name\n\n                "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.size.name,expression:"size.name"}],attrs:{id:"sizeName"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.size.name=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"Twin",selected:""}},[e._v("Twin")]),e._v(" "),s("option",{attrs:{value:"Twin XL"}},[e._v("Twin XL")]),e._v(" "),s("option",{attrs:{value:"Full"}},[e._v("Full")]),e._v(" "),s("option",{attrs:{value:"Queen"}},[e._v("Queen")]),e._v(" "),s("option",{attrs:{value:"King"}},[e._v("King")]),e._v(" "),s("option",{attrs:{value:"California King"}},[e._v("California King")]),e._v(" "),s("option",{attrs:{value:"Split King"}},[e._v("Split King")])])])]),e._v(" "),s("div",{staticClass:"is-half is-flexy is-column"},[s("label",{staticClass:"select-label"},[e._v("\n\n                Size\n\n                "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.size.size,expression:"size.size"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.size.size=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:'38" x 74"',selected:""}},[e._v('38" x 74"')]),e._v(" "),s("option",{attrs:{value:'38" x 80"'}},[e._v('38" x 80"')]),e._v(" "),s("option",{attrs:{value:'54" x 75"'}},[e._v('54" x 75"')]),e._v(" "),s("option",{attrs:{value:'60" x 80"'}},[e._v('60" x 80"')]),e._v(" "),s("option",{attrs:{value:'76" x 80"'}},[e._v('76" x 80"')]),e._v(" "),s("option",{attrs:{value:'72" x 84"'}},[e._v('72" x 84"')]),e._v(" "),s("option",{attrs:{value:'38" x 80" - 2'}},[e._v('38" x 80" - 2')])])])])])]),e._v(" "),s("div",{staticClass:"form-row"},[s("label",[e._v("Price")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.size.price,expression:"size.price"}],staticClass:"form-controller",attrs:{type:"text",placeholder:"Price"},domProps:{value:e.size.price},on:{input:function(t){t.target.composing||(e.size.price=t.target.value)}}}),e._v(" "),s("label",{staticStyle:{"margin-top":"8px"}},[e._v("Discounted Price")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.size.promo,expression:"size.promo"}],staticClass:"form-controller",attrs:{type:"text",placeholder:"Price"},domProps:{value:e.size.promo},on:{input:function(t){t.target.composing||(e.size.promo=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-row is-center is-middle"},[s("button",{staticClass:"button is-primary is-big",on:{click:e.onAddSize}},[e._v("Add")])]),e._v(" "),s("div",{staticClass:"form-row"},e._l(e.DB_SIZES,function(t,i){return s("div",{staticClass:"sizes-item"},[s("input",{domProps:{value:t.name},on:{input:function(s){e.updateSizeAttribute(t,s.target.value,"name")}}}),e._v(" "),s("input",{domProps:{value:t.size},on:{input:function(s){e.updateSizeAttribute(t,s.target.value,"size")}}}),e._v(" "),s("input",{domProps:{value:t.price},on:{input:function(s){e.updateSizeAttribute(t,s.target.value,"price")}}}),e._v(" "),s("input",{attrs:{placeholder:"Promotion Price"},domProps:{value:t.promo},on:{input:function(s){e.updateSizeAttribute(t,s.target.value,"promo")}}}),e._v(" "),s("span",{staticClass:"button is-danger is-small",on:{click:function(s){e.onDelete(t)}}},[e._v("Delete")])])}))])])])])},staticRenderFns:[]}},,,,function(e,t){}],[41]);
//# sourceMappingURL=app.a8ba445aa15c1db9bffb.js.map